<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zach Montgomery</title>
<link rel="icon" type="image/x-icon" href="flavicon.png">

<style>
@font-face {
    font-family: 'Franklin Gothic Book';
    src: url('./franklin-gothic-book.ttf') format('truetype');
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Franklin Gohic Book';
    font-size: 1.9vh;
    background-color: #ff9900;
    display: flex;
    height: 100vh;
    overflow: hidden;
    line-height: 1.3;
}

a {
    text-decoration: none;
    color: black;
    transition: color 0.4s ease;
}

a:hover,
.tab.active {
    color: #ff9900;
}

.tabs {
    z-index: 100;
}

.left-container {
    padding: 36px;
    width: 100%;
    height: 100vh;
    position: relative;
    z-index: 0;
    background: white;
    transform: translate(10px,0);
    overflow: hidden;
}

.image-box {
    display: none;
    position: absolute;
    text-align: center;
    z-index: -1;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    height: 90%;
    pointer-events: none;
}

.image-box img {
    height: 100%;
    width: auto;
}

.arena-counter {
    position: absolute;
    bottom: 36px;
    right: 36px;
    font-size: 1.4vh;
    opacity: 0.45;
    display: none;
    pointer-events: none;
}

.image-arrows {
    position: absolute;
    bottom: 31.5px;
    right: 72px;
    display: none;
    gap: 12px;
    font-size: 2.4vh;
    font-weight: bold;
    opacity: 1;
    z-index: 100;
    filter: invert(10);
    mix-blend-mode: difference;
}

.image-arrows span {
    cursor: pointer;
    user-select: none;
}

.image-arrows span:hover {
    opacity: 1;
}

.image-caption {
    position: absolute;
    max-width: 165px;
    z-index: 10;
    font-size: 1.4vh;
}

.bottom-links {
    position: absolute;
    bottom: 35px;
}

.third-container {
    padding: 36px;
    position: fixed;
    top: 0;
    left: -100%;
    width: 25%;
    height: 100vh;
    background-color: #ff9900;
    color: white;
    transition: left 0.6s ease;
    z-index: 200;
}

.third-container.active {
    left: 0;
}

body.third-active {
    margin-left: 25%;
}

body.third-active .image-box {
    filter: blur(30px);
    mask-image: linear-gradient(
        to left,
        black 0% 10%,
        transparent 80% 100%
    );
    transition: filter 1s ease;
}

.third-container a:link,
.third-container a:visited {
    color: white;
    text-decoration: underline;
}

.third-container a:hover {
    color: black;
}

@media (max-width: 768px) {
    body { font-size: 1.75vh; }
    .image-box,
    .image-caption,
    .image-arrows,
    .arena-counter {
        display: none !important;
    }
    .third-container {
        width: 70%;
    }
    body.third-active {
        margin-left: 70%;
    }
}
</style>
</head>

<body>

<div class="left-container">

    <a href="#" class="logo">‚úª Zach Montgomery</a><br><br>

    <div class="tabs">
        <a href="#" class="tab" data-link="https://www.are.na/zach-montgomery/editorial-nlc0okylaly">Editorial</a><br>
        <a href="#" class="tab" data-link="https://www.are.na/zach-montgomery/identity-px96ygpyvo8">Identity</a><br>
        <a href="#" class="tab" data-link="https://www.are.na/zach-montgomery/production-il7gunqgnry">Production</a><br>
        <a href="#" class="tab" data-link="https://www.are.na/zach-montgomery/teaching-shen3nx2bqy">Teaching</a><br>
    </div><br>

    <div class="image-caption" id="imageCaption"></div>

    <div class="image-box" id="imageBox">
        <img src="" id="imageElement">
    </div>

    <div class="image-arrows" id="imageArrows">
        <span id="prevArrow">&lt;</span>
        <span id="nextArrow">&gt;</span>
    </div>

    <div class="arena-counter" id="arenaCounter"></div>

    <!-- ABOUT LINK ‚Äî restored -->
    <div class="bottom-links">
        <a href="#" id="aboutLink">‚ûù About</a>
    </div>
</div>

<!-- ABOUT PANEL ‚Äî restored verbatim -->
<div class="third-container" id="thirdContainer">
    Zach is a multidisciplinary designer and student based in Richmond, VA.
    He is currently an Art Director at the
    <a href="https://commonwealthtimes.org/">Commonwealth Times</a>
    and a Studio Monitor + Instructor at
    <a href="https://www.studiotwothree.org/">Studio Two Three</a>
    <br><br>
    <p>
        Zach's practice specializes in editorial design and physical typographic printing.
        His recent work explores constraints, production, precedents, and translation. 
    </p><br>
    <a href="mailto:zm@zachmontgomery.us">zm@zachmontgomery.us</a><br><br>
    <a href="ZM25Resume.pdf">‚Üó Resume</a><br>
    <a href="https://www.linkedin.com/in/zach-montgomery-13b935235/">‚Üó LinkedIn</a><br>
    <a href="https://www.are.na/zach-montgomery">‚Üó Are.na</a>
</div>

<script>

document.getElementById('aboutLink').addEventListener('click', e => {
    e.preventDefault();
    document.getElementById('thirdContainer').classList.toggle('active');
    document.body.classList.toggle('third-active');
});

const tabs = document.querySelectorAll('.tab');
const imageBox = document.getElementById('imageBox');
const imageElement = document.getElementById('imageElement');
const imageCaption = document.getElementById('imageCaption');
const arenaCounter = document.getElementById('arenaCounter');
const imageArrows = document.getElementById('imageArrows');
const prevArrow = document.getElementById('prevArrow');
const nextArrow = document.getElementById('nextArrow');
const logo = document.querySelector('.logo');

let activeTabName = null;
let isScrolling = false;

const arenaBlocks = {
    Editorial: [42542131, 42525196, 42539991, 42542530],
    Identity: [42535318, 42537124, 42542203, 42542332, 42601785, 42689521],
    Production: [41830306, 41830301, 41830295, 41038168, 41038092, 41037976, 42535514, 36813107, 42542580, 42560386, 42590569],
    Teaching: [42525144, 42535397, 42535396, 42535395, 42565146, 43405938]
};

const arenaState = {};

function shuffleArray(arr) {
    return arr.map(v => ({ v, s: Math.random() }))
              .sort((a, b) => a.s - b.s)
              .map(o => o.v);
}

async function fetchArenaBlock(id) {
    const res = await fetch(`https://api.are.na/v2/blocks/${id}`);
    const data = await res.json();
    return {
        title: data.title,
        description: data.description,
        image: data.image?.original?.url
    };
}

async function showNextArenaBlock(tabName, direction = 1) {
    const state = arenaState[tabName];
    if (!state) return;

    state.index += direction;
    if (state.index >= state.order.length) state.index = 0;
    if (state.index < 0) state.index = state.order.length - 1;

    const block = await fetchArenaBlock(state.order[state.index]);
    if (!block?.image) return;

    imageElement.src = block.image;
    imageCaption.textContent = [block.title, block.description].filter(Boolean).join(' ‚Äî ');
    imageBox.style.display = 'block';
    imageArrows.style.display = 'flex';

    arenaCounter.textContent = `${state.index + 1} / ${state.order.length}`;
    arenaCounter.style.display = 'block';
}

tabs.forEach(tab => {
    tab.addEventListener('click', e => {
        const isMobile = window.innerWidth <= 768;

        if (isMobile) {
            const link = tab.dataset.link;
            if (link) {
                window.location.href = link; // üëà allow visit on mobile
            }
            return;
        }

        e.preventDefault();

        const tabName = tab.textContent.trim();
        activeTabName = tabName;

        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        if (!arenaState[tabName]) {
            arenaState[tabName] = {
                order: shuffleArray(arenaBlocks[tabName]),
                index: -1
            };
        }

        showNextArenaBlock(tabName, 1);
    });
});

window.addEventListener('wheel', e => {
    if (!activeTabName || isScrolling) return;
    isScrolling = true;
    showNextArenaBlock(activeTabName, e.deltaY > 0 ? 1 : -1);
    setTimeout(() => isScrolling = false, 450);
});

window.addEventListener('keydown', e => {
    if (!activeTabName) return;
    if (e.key === 'ArrowRight') showNextArenaBlock(activeTabName, 1);
    if (e.key === 'ArrowLeft') showNextArenaBlock(activeTabName, -1);
});

nextArrow.addEventListener('click', () => {
    if (activeTabName) showNextArenaBlock(activeTabName, 1);
});

prevArrow.addEventListener('click', () => {
    if (activeTabName) showNextArenaBlock(activeTabName, -1);
});

logo.addEventListener('click', e => {
    e.preventDefault();
    tabs.forEach(t => t.classList.remove('active'));
    imageBox.style.display = 'none';
    imageArrows.style.display = 'none';
    arenaCounter.style.display = 'none';
    activeTabName = null;
});
</script>

</body>
</html>

